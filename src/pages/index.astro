---
import Layout from "../layouts/Layout.astro";
import Card from "../components/Card/index.astro";
import IntroCard from "../components/IntroCard.astro";
import ContactsCard from "../components/ContactsCard.astro";
import TimeZone from "../components/TimeZoneCard.astro";
import AboutMe from "../components/AboutMe.astro";
import Now from "../components/Now.astro";
import Globe from "../components/Globe";
import { getCollection } from "astro:content";
import { formatDate } from "../lib/helpers";

const posts = (await getCollection("blog"))?.sort(
  (blogEntryA, blogEntryB) =>
    (blogEntryB.data.pubDate || new Date()).getTime() -
    (blogEntryA.data.pubDate || new Date()).getTime()
);
const now = new Date().toLocaleString("en-IN", {
  weekday: "long",
  hour: "2-digit",
  minute: "2-digit",
  second: "2-digit",
  timeZoneName: "short",
});
---

<script>
  import { stagger, animate, type AnimationSequence } from "motion";
  import { loaderAnimation } from "../lib/constants";
  const cards = document.querySelectorAll(".card");

  const sequence = [
    loaderAnimation,
    [
      cards,
      { y: ["40%", "0%"], opacity: [0, 1] },
      {
        type: "spring",
        at: "-0.1",
        delay: stagger(0.3),
      },
    ],
  ];

  animate(sequence as AnimationSequence);
</script>

<Layout
  title="Adi Gandhi- Digital Cover"
>
  <main
    class="text-white m-auto p-2 grid gap-2 max-w-6xl overflow-hidden relative w-full sm:p-4 sm:gap-2 md:grid-cols-2 md:gap-3 md:p-6 lg:h-screen lg:grid-rows-8 lg:grid-cols-4 lg:gap-4 lg:max-h-[800px]"
  >
    <IntroCard />
    <AboutMe />
    <ContactsCard />
    <TimeZone />
    <Now />
    <Card
      colorText="text-neutral-900"
      colSpan="md:col-span-1"
      href="travel"
      rowSpan="md:row-span-1"
      title="Countries I visited"
    >
      <div class="h-full w-full absolute inset-0 -z-10">
        <Globe client:load />
      </div>
    </Card>
<Card
  colSpan="md:col-span-1"
  rowSpan="md:row-span-2"
  title="Now Playing"
  href="https://open.spotify.com/album/6trNtQUgC8cgbWcqoMYkOR"
>
  <img
    src="/bb.jpg" 
    alt="Album Cover"
    class="rounded-xl w-full h-full object-cover hover:scale-105 transition-transform duration-200"
  />
</Card>

<Card colSpan="md:col-span-1" rowSpan="md:row-span-1">
  <div class="flex items-center justify-center h-full w-full">
    <div id="clock" class="text-3xl sm:text-4xl md:text-5xl font-mono text-white">
      --:--:--
    </div>
  </div>

  <script type="module" client:load>
    const clock = document.getElementById("clock");

    function updateClock() {
      const now = new Date();
      const time = now
        .toLocaleTimeString("en-GB", {
          hour: "2-digit",
          minute: "2-digit",
          second: "2-digit",
          hour12: false,
        });
      clock.textContent = time;
    }

    updateClock();
    setInterval(updateClock, 1000);
  </script>
</Card>


  </main>
</Layout>
